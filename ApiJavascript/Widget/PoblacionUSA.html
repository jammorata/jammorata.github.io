<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no"/>
    <title>Poblacion USA</title>
    <link rel="stylesheet" href="https://js.arcgis.com/3.19/esri/themes/calcite/dijit/calcite.css">
    <link rel="stylesheet" href="https://js.arcgis.com/3.19/esri/themes/calcite/esri/esri.css">
    <link rel="stylesheet" href="https://js.arcgis.com/3.19/esri/css/esri.css">

    <style>
      html, body, .container, #map {
        height:100%;
        width:100%;
        margin:0;
        padding:0;
        margin:0;
        font-family: "Open Sans";

      }
      #map {
        padding:0;
      }
      #search {
         display: block;
         position: absolute;
         z-index: 2;
         top: 2px;
         left: 300px;
      }
      #layerList{

        width:40%;
      }
      #layerListPane{
        width:40%;
      }
      .esriLayer{
      background-color: #fff;
      }
      .esriLayerList .esriList{
          border-top:none;
      }
      .esriLayerList .esriTitle {
        background-color: #fff;
        border-bottom:none;
      }
      .esriLayerList .esriList ul{
        background-color: #fff;
      }


    </style>
    <script src="https://js.arcgis.com/3.19/"></script>
    <script>
      var map;

      require(["esri/map",
               "esri/layers/ArcGISDynamicMapServiceLayer",
               "esri/dijit/LayerList",
               "esri/dijit/Search",
               "esri/InfoTemplate",
               "esri/layers/FeatureLayer",
               "esri/InfoTemplate",
               "dijit/layout/BorderContainer",
               "dijit/layout/ContentPane",
               "dojo/domReady!"],
               function(Map,ArcGISDynamicMapServiceLayer,LayerList,Search,InfoTemplate,FeatureLayer,InfoTemplate) {
        map = new Map("map", {
          basemap: "gray",  //For full list of pre-defined basemaps, navigate to http://arcg.is/1JVo6Wd
          center: [-97.45, 40.75], // longitude, latitude
          zoom: 4
        });
        var layer = new ArcGISDynamicMapServiceLayer("http://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer",{
        });
        map.addLayer(layer);
        var layerList = new LayerList({
        map: map,
        showLegend: true,
        showSubLayers: true,
        showOpacitySlider: true,
        layers: [
          {   layer:layer,
              showSubLayers: true, // optional, show sublayers for this layer. Defaults to the widget's 'showSubLayers' property.
              showLegend: true, // optional, display a legend for the layer items.
              showOpacitySlider: true, // optional, display the opacity slider for layer items.
              }

                ]},"layerList");
        layerList.startup();

        var search = new Search({
            map: map,
            enableButtonMode: true,
            enableInfoWindow: true,
         }, "search");

         var sources = search.get ("sources");

         var infotempCities = new InfoTemplate("Attributes", "City Name: ${areaname}<br>Population: ${pop2000}");
         var infotempStates = new InfoTemplate("Attributes", "State Name: ${state_name}<br>Capital: ${capital}<br>Population: ${pop2000}");

         sources.push(

                    {
                    featureLayer: new FeatureLayer("http://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer/0"),
                    searchFields: ["areaname"],
                    displayField:"areaname",
                    exactMatch: false,
                    name: "Cities",
                    outFields: ["*"],
                    placeholder: "New York",
                    maxResults: 5,
                    maxSuggestions: 5,
                    infoTemplate:infotempCities,
                    enableSuggestions: true,
                    },

                    {
                    featureLayer: new FeatureLayer("http://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer/2"),
                    searchFields: ["state_name"],
                    displayField:"state_name",
                    exactMatch: false,
                    name: "States",
                    outFields: ["*"],
                    placeholder: "Idaho",
                    maxResults: 5,
                    maxSuggestions: 5,
                    infoTemplate:infotempStates,
                    enableSuggestions: true,
          });

         search.set("sources",sources);

         search.startup();




                    });




    </script>
  </head>

  <body class="calcite">
    <div class="container" data-dojo-type="dijit/layout/BorderContainer"
         data-dojo-props="design:'headline',gutters:false">
    <div id="layerListPane" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'right'">
           <div id="layerList"></div>
           <div id="search"></div>
    </div>
    <div id="map" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'"></div>



    </div>
  </body>
</html>
