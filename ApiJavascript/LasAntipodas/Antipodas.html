<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no"/>
    <title>Las Antipodas</title>
    <link rel="stylesheet" href="Antipodas.css">
    <link rel="stylesheet" href="https://js.arcgis.com/3.19/esri/css/esri.css">
    <link href="https://fonts.googleapis.com/css?family=Bangers" rel="stylesheet">
    <style>
      html, body,
      #mapDiv {
        height: 100%;
        margin: 0;
        padding: 0;
      },
      #map1{},
      #map2{},
    </style>
    <script src="https://js.arcgis.com/3.19/"></script>
    <script>
      var map_antipod1;
      var map_antipod2;


      require(["esri/map",
          "esri/geometry/Point",
          "esri/symbols/SimpleMarkerSymbol",
          "esri/Color",
          "esri/graphic",
          "esri/layers/GraphicsLayer",
          "esri/geometry/webMercatorUtils",
          "dojo/on",
          "dojo/domReady!"],
        function(Map,
          Point,
          SimpleMarkerSymbol,
          Color,
          graphic,
          GraphicsLayer,
          webMercatorUtils,
          on) {

          map_antipod1 = new Map("map1", {
            basemap: "national-geographic",
            center: [-3.62, 40.42],
            zoom: 3



          });

          map_antipod2 = new Map("map2", {
            basemap: "national-geographic",
            zoom: 3

          });

           map_antipod1.on("extent-change",function(change){

            var center1 = change.extent.getCenter();
            map_antipod2.centerAt(center1);
            var coord = webMercatorUtils.xyToLngLat(center1.x, center1.y);


            if (coord[0] <= 0) {
                    coord[0] = coord[0]+180
                    coord[1] = coord[1]*(-1)
                  }
            else if (coord[0] > 0) {
                    coord[0] = coord[0]-180
                    coord[1] = coord[1]*(-1)
                    } ;


          map_antipod2.centerAt(coord);
          });

          map_antipod1.on("zoom-end",function(change1){

            var zoom1 = change1.level;
            map_antipod2.setLevel(zoom1);
          });


  /*      map_antipod2.on("extent-change",function(change2){

          var center2 = change2.extent.getCenter();
          map_antipod1.centerAt(center2);
          var coord2 = webMercatorUtils.xyToLngLat(center2.x, center2.y);


          if (coord2[0] <= 0) {
               coord2[0] = coord2[0]+180
               coord2[1] = coord2[1]*(-1)
             }
          else if (coord2[0] > 0) {
               coord2[0] = coord2[0]-180
               coord2[1] = coord2[1]*(-1)
               } ;


        map_antipod1.centerAt(coord2);
        });

        map_antipod2.on("zoom-end",function(change3){

          var zoom2 = change3.level;
          map_antipod1.setLevel(zoom2);
        }); */
      });
    </script>
  </head>

  <body>
        <h1 class="alin_cen">MAPA DE LAS ANTIPODAS</h1>
        <div id="map1"></div>
        <div id="map2"></div>

  </body>
</html>
